# Project 2


Part 1 : Research how to monitor a Linux system, as well as what to look for when doing so. Tak notes of all your findings , be as exhaustive as possible.

## Context:
[Main area of concern when monitoring a system 🖥️](#Main-area-of-concern-when-monitoring-a-system)                         
[Memory Intensive running processes 🏃‍♂️](#memory-intensive-running-processes)                  
[Log files? 🤔](#log-files)                        
[Last connected users info ℹ️](#last-connected-users)    
[Different metrics of health and performance of a system ⚙️](#different-metrics-of-health-and-performance-of-a-system)                          
[Checking the uptime of a machine ✅](#checking-uptime-of-a-machine)                 
[Assessing the network traffic 🚦](#assasing-the-network-traffic)                      
[Active x reactive monitoring 🔁](#active-x-reactive-monitoring)                                                                                                                                   
[Backup Status Monitoring 🗝️](#backup-status-monitoring)                                  
[Explication of all the used commands in this file, alphabetically 😊](#commands)                          


### Main area of concern when monitoring a system 
What are the main area of concern when monitoring a system? 
(EX: CPU load, disk usage, ...)

Several key areas are monitored to ensure optimal performance, stability and security:


- **CPU Usage**: Monitoring the central processing unit -> ensures system isn’t overburdened & can handle the workload efficiently 
Commands to monitor CPU usage: 
```
$ top
$ mpstat 
$ sar
```

- **Memory Usage**: helps prevent excessive memory consumption -> can lead to slowdowns or system crashes
Commands for monitoring:
```
$ free -h
$ top
$ htop
$ vmstat 1
$pmp <PID>
$ ps aux –sort=-%mem | head -n 11
```


- **Disk Usage**: essential to prevent disk space from running out which can lead to system instability or failure 
Monitoring commands: 
```
$ df -h
$du -sh /path/to/directory
$ iostat -x
$ iotop
```

- **Network Usage**: monitoring system traffic to ensure that system has sufficient bandwidth & isn’t being overwhelmed by network activity  
```
$ iftop
$ nload
$ vnstat
$ iptraf-ng
$ tcpdump -i <interface>
```


- **Application Performance**: monitoring performance of critical applications running on system  to ensure that they’re running smoothly & meting performance expectations 
```
$ top
$ htop
$ vmstat 1
$ sar
$ strace -p <pid>
$ perf stat <command>
$ iotop
$ netstat -tuln
$ tcpdump -I <interface>
```

- **Security Events**: monitoring for security events such as unauthorized access attempts, malware activity or system vulnerabilities -> helps ensure the security of system.
```
$ cat /var/log/syslog 
$ tail -f /var/log/syslog
$ grep « authentication failure » /var/log/syslog 
$ journalctl
$ auditctl -l
$ fail2ban -client status
$ tripwire –check 
```

- **System Logs**: Monitoring system logs for errors, warnings & other events -> helps identify issues and troubleshoot problems effectively 
```
$ tail -f /var/log/syslog
$ grep « error » /var/log/syslog
$  less /var/log/syslog
$ journalctl -xe
$dmesg | tail
$sudo systemctl status rsyslog
$ sudo logwatch –detail High
$ logrotate -d /etc/logrotate.conf
```

- **Hardware Health**: Monitoring hardware health indicators (f.e. : temperature, fan speed, power supply status)  -> helps ensure that physical components od system are functioning properly.
```
$ sudo sensors
$ sudo smartctl -a /dev/sda
$ sudo hddtemp /dev/sda
$ sudo ipmitool sensor
$ sudo lshw
$ sudo dmidecode
$ nvidia-smi
```

- **Service availability**: web servers, databases, email servers, monitoring the availability of these essential services for example helps ensure uninterrupted service for users.
```
$ systemctl status <service_name>
$ systemctl status ssh
$ systemctl is-active <service_name>
```

- **Backup Status**: monitoring the status of backups ensures that critical data is being backed up regularly & successfully, reducing risk of data loss


### Memory Intensive Running Processes
How can you check what the most memory intensive running processes are?

With the **top** command :
`
$ top ` and then pressing ‘shift + M’ to sort processes by memory usage 
Look at the processes consuming the most memory at the top.

With the **htop** command: 
`
$ htop `

With the **ps** command: 
`
$ ps aux –sort=-%mem | head `
->	Lists processes sorted by memory usage


### Log files
What are log files? Where can you find them on a typical Linux system ?

**Log files** are records of events, activities and status messages generated by various processes, services and the operating system itself. Essential for system administrators and developers to troubleshoot issues, monitoring system health and analyze system behavior over time.

> Log files are typically sorted in the /var/log directory.

#### Common log files: 
		

**syslog** (/var/log/syslog or /var/log/messages)
o	Contains general system messages from various components and services

**Kernel log** (/var/log/auth.log or /var/log/secure)
o	Contains authentication-related messages, including user logins and authentication attempts.

**Application logs**
o	Each application may have its own log file stored in /var/log

**Package Manager Logs**
o	Logs related to package management such as ‘dpkg’ or ‘yum’

**Cron Logs** (/var/log/cron or /var/log/cron.log)
o	Logs of scheduled tasks and cron jobs

**Boot Logs** (/var/log/boot.log)
o	Contains Info about the boot process

**Security Logs** ( /var/log/security or /var/ log/audit)
o	Contains security-related messages, particularly on systems with SELinux or auditd enabled .
	

### Last Connected Users
How can you check the last connected users, what they did, when they left?

Using the **Last** command: 
`
$ Last `
-> displays a list of last logged-in users. Typically shows the user’s login name, terminal, host from which they logged in, start time, and end time if they’ve logged out.

Examining the **/var/log/auth.log or /var/log/secure file**:
```
$ sudo cat /var/log/auth.log | grep ‘session opened’
$ sudo cat /var/log/auth.log | grep ‘session closed'
```

Using **who** command: 
`
$ who `
Shows info about currently logged-in users. Displays the username, terminal and login time.

Using the **W** command: 
`
$ W `
Displays a summary of current activity on the system, including the logged-in users and what they’re currently doing.

Examining **User History Files**:
If the system is configured to record user commands (typically in files like ~/.bash_history) you can check individual user’s activity history. 
`
$ cat ~/.bash_history `




### Different Metrics of health and performance of a system


**Resource Utilization** :
-	CPU Usage: Percentage of CPU time consumed by the system and individual processes.
-	Memory Usage: Amount of physical and virtual memory used by the system and processes 
-	Disk I/O : Rate of data read from or written to disk, including metrics like throughput, latency, and IOPS (Input/Output Operations Per Second)
-	Network I/O : Rate of data sent and received over the network interfaces, including metrics like throughput, packet loss and latency 

**System Performance** : 
-	Response Time: Time taken by the system to respond to user requests or process tasks.
-	Latency: Time delay between initiating a request and receiving a response, often specific to network or disk operations
-	Throughput: Rate at which system can process or transfer data, measures in operations per unit time. 

**System Stability** :
-	 Uptime: duration for which the system ahs been running without interruption.
-	Availability: Percentage of time the system is operational and accessible for users.
-	Reliability: Measure of the system’s ability to perform consistently without failures.

**Capacity Planning** : 
-	Scalability: Measure of how well the system can handle increased workload or resource demands.
-	Resource Forecasting: Predictive analysis of resource usage trends to anticipate future capacity requirements

**Security and Compliance** : 
-	Security Events: Number and severity of security-related events, such as failed login attempts or intrusion attempts
-	Compliance Metrics: Adherence to regulatory standards and organizational policies, such as data protection laws or industry-specific compliance requirements.


**Application Performance** : 
-	Transaction Rate: Number of transactions processed per unit time by an application or service.
-	Error Rates: Frequency of errors encountered during application execution or data processing
-	Resource Consumption: Application-specific metrics related toto CPU, memory, disk, and network usage.

**User Experience** :
-	Load Time: Time taken for applications or web pages to load and become usable



### Checking uptime of a machine 

How can you check the uptime of a machine ?

Using the **Uptime** command: 
`
$ Uptime `
The output will look something like this:
14:32:65 up 7 days, 22:15, 3 users, load average: 0.00, 0.01, 0.05
In this example: 
-	14:32:56 is the current time
-	Up 7 days, 22:15 indicates that the system has been up for 7 days and 22 hours and 15 minutes
-	3 users shows the nr of users currently logged in 
-	Load average: 0.00, 0.01, 0.05 represents the  load average over the last 1, 5, and 15 minutes.


### Assasing the network traffic

**Packet Sniffing**: 
-	Wireshark : A powerful network protocol analyser that captures and displays packets from a network in real-time. It allows you to analyse individual packets and filter traffic based on various criteria
-	Tcpdump: A command-line packet analyser that captures packets and can save them to a file for later analysis. It’s widely used for network troubleshooting and monitoring.

**NetFlow and IPFIX**:
-	NfSen: A web-based front-end for the NFDUMP NetFlow tools. Provides a graphical interface for analysing NetFlow and sflow data.
-	nProbe: A NetFlow and IPFIX collector that converts network traffic into NetFlow records for analysis by NetFlow analysers

**Network Monitoring Tools**: 
-	Nagios: A popular open-source network monitoring tool that can monitor network traffic, server health, and other aspects of IT infrastructure.
-	Zabbix: Another open-source network monitoring tool that provides real-time monitoring and altering for network traffic and system performance.

**Bandwidth Monitoring**: 
-	Iftop: A command-line tool displays bandwidth usage on an interface in real-time
-	nload: Another command-line tool that provides a visual representation of network traffic on an interface 

**Flow-Based Analysis**: 
-	ntopng: Web-based traffic analysis tool that provides detailed network traffic statistics, including flows, hosts, protocols, and more. 
-	Argus: A network traffic analysis tool that generates network flow records for analysis and reporting

**Firewall and Router Logs**: 
-	Analysing logs generated by firewalls, routers, and other network devices can provide insights into traffic patterns, connections and potential security threats.

**Deep Packet Inspection (DPI)**
-	Suricata: An open-source intrusion detection and prevention system that performsdeep packet inspection to analyse network traffic for malicious activity 






### Active x reactive monitoring


**active monitoring** = checking to ensure that standards are met and that the workplace is safe and free of health risks.
->	Ensure that health and safety standards are correct in the workplace before accidents, incidents or ill-health are caused.
Examples of active monitoring methods that can be used to check conformance to standards:
-	Safety inspections, sampling, surveys, tours , audits, compliance checks, inspections, testing and sampling, surveillance, mystery shopping, performance reviews, feedback mechanisms, and document reviews
Workplace inspections = rly important in active monitoring. Various facts must be considered when setting up an inspection system, such as: 
-	Type of inspection, Frequency of inspection , responsibility of inspection, competence of the inspector, use of checklists, action planning for problems found 


**Reactive monitoring** = measuring safety performance by reference to accident, incidents and ill-health that have already occurred.
->	Using accidents, incidents and ill-health as indicators of performance to highlight areas of concern.
	Reactive measures include: 
-	Measures of incident types and frequency rates, sickness absence rates, nr of reported near miss events and property damage incidents, nr of enforcement actions taken , etc.








### Backup Status Monitoring

Monitoring the status of backups is essential to ensure that critical data is being backed up regularly and successfully, reducing the risk of data in case of system failure or disaster. 

> Some approaches for monitoring backup status: 

-	**Backup Log Analysis**: 
o	Regularly review the logs generated by your backup solution to check for  any errors, warnings or completion messages. Analyse these logs to ensure that backups are completing successfully and that there are no issues affecting the backup process

-	**Automated Notifications**:
o	Configure your backup solution to send automated notifications or alerts after each backup job. Set up email alerts or integrate with monitoring systems to receive Notifications in real-time if any backups fail or encounter issues.

-	**Backup Reporting**:
o	 Some backup solutions offer built-in  reporting features or dashboards that provide detailed info about backup status, including success rates, backup durations, and any errors encountered during backup operations. Use these reports to track backup performance over time and identify and recurring issues.

-	**Custom Monitoring Scripts**:
o	Create custom monitoring scripts or con jobs to periodically check the status of backups. These scripts can parse backup logs, check backup directories for the presence of new backup files, or use backup APIs to retrieve status info from the backup solution’s management interface


By monitoring the status of backups regularly you can ensure that critical data is protected and that backup processes are functioning as expected , allowing for timely intervention in case of  any issues or failures

### Commands 

--

 `
$ auditctl `
Provides a powerful tool called auditd for monitoring and logging security-related events at the kernel level. Auditctl command is to configure audit rules and monitor specific system acitivites.
`
$ auditctl -l
`

--

`
$ df -h `
Displays disk space usage information for all mounted filesystems. Shows the total disk space, used space, available space, and percentage usage for each filesystem. -h flag displays the output in a human-readable format
`
$ df -h`

--

 `
$ dmesg `
Displays kernel ring buffer messages which can be useful for troubleshooting hardware-related issues and kernel events
`
$ dmesg | tail
`

--

` 
$ dmidecode `
Command-line utility for retrieving hardware info stored in the system BIOS or firmware 

--

`
$ du `
Estimates disk usage for files and directories. Can be used to find out how much space individual directories or files are consuming. -s flag displays only the total for each specified file or directory, the -h flag  makes the output human-readable
`
$ du -sh /path/to/directory `
du with sort , combine them to list directories or files by size
`
$ du -h /path/to/directory | sort -rh | head -n 10 `

--

`
$ fail2ban `
A popular intrusion prevention software that monitors log files for repeated failed login attempts and automatically blocks IP addresses associated with suspicious activity. 
Configure fail2ban to monitor various services and log files. 
`
$ fail2ban-client status `

--

`
$ free  `
Displays the total amount of free and used physical and swap memory in the system, as well as the buffers and caches used by the kernel . -h flag displays the output in a human-readable format
`
$ free -h `

--

`
$ grep `
Searches for specific patterns or keywords in files, which can be useful for filtering log entries ` 
$ grep “error /var/log/syslog
`

--

`
$ hddtemp ` 
Command-line utility for monitoring hard drive temperatures
`
$ sude hddtemp /dev/sda ` 

--

`
$htop ` 
-> similar to top , an interactive process viewer that provides a more user-friendly interface for monitoring system resources including memory usage . Also allows you to sort processes by memory usage by default 

--

`
$ iftop `
Displays real-time network bandwidth usage by individual connections. Shows a list of network connections and their corresponding bandwidth usage in both directions

--

`
$ iostat  `
Reports CPU statistics and input/output statistics for devices, partitions and network filesystems. -x flag displays extended statistics , including device utilization and average request size.


--

`
$ iotop `
Displays real-time I/O usage info by processes, shows the amount of disk read and write activity generated by each process.

--

`
$ ipmitool `
Command-line utility for managing and monitoring IPMI-enabled hardware, such as servers and network appliances.
`
$ sudo ipmitool sensor `

--


`
$ journalctl `
Provides access to the system journal, which contains logging information similar to syslog. Use it to view system logs, including security-related events

--

`
$ legrotate `
A utility for managing  log files by rotating, compressing and deleting old files. Typically configured to run as a cron job
` 
$ logrotate -d /etc/logrotate.conf `

--

`
$less `
Allows you to view the contents of log files interactively, enabling you to scroll through logs more efficiently.
`
$ less /var/log/syslog
`

--

`
$ lshw
`
Command-line utility for displaying detailed info about hardware components, including CPU’s, memory, storage devices and more
`
$ sudo lshw
`

--

`
$logwatch `
Log analysis tool that summarizes and reports on log file entries. Can be configured to generate daily or weekly reports summarizing system activity 
`
$ sudo logwatch –detail High `

--


`
$ mpstat `
Displays CPU usage statistics for each available processor, including average  CPU usage since the system was booted.

--

`
$ netstat `
Displays network connections, routing tables, interface statistics, masquerade connections, and multicast memberships. Monitoring network activity can be essential for network-bound applications.
`
$ netstat -tuln `

--

`
$ nload `
Displays network traffic in a visual format. Shows incoming and outgoing traffic rates in real-time for each network interface.

--


`
$ nvidia-smi `
Command-line utility for monitoring GPU utilization, temperature and other parameters.7

--

`
$ perf `
Powerful performance monitoring tool that provides a wide range of performance counters, including CPU performance counters, memory access patterns and more.
`
$ perf stat <command> `

--

`
$ pmap `
Displays memory usage for a specific process or a list of processes. You can specify the process ID (PID) as an argument 
`
$ pmap <PID> `

--

`
$ ps `
-> lists currently running processes, combine it with sort and head commands to get the top memory-consuming processes 
`
$ ps aux –sort=-%mem | head -n 11
`

--

`
$ rsyslog
`
Flexible and scalable syslog implementation service that allows you to configure log forwarding, filtering, and processing.
`
$ sudo systemctl status rsyslog
`

--

`
$ sar ` 
System activity reporter collects, reports, and saves system activity info including CPU usage at regular intervals -> use it to generate reports on CPU usage over time

--


`
$ smartctl `
Command line utility for monitoring and controlling SMART ( Self-Monitoring, Analysis and Reporting Technology) enabled hard rives and solid-state drives ( SSDs)
`
$ sudo smartctl – a  /dev/sda `

--


`$ strace`
Debugging tool that allows you to monitor system calls and signals which can help identify bottlenecks and performance issues  within an application
` 
$ strace -p <pid> `

--

`
$ tcpdump `
Powerful command-line packet analyser. Captures and displays network packets in real-time or saves them to a file for later analysis
`
$ tcpdump -i <interface> `

--

`
$ tripwire `
A file integrity monitoring tool that detects unauthorized changes to system files and directories. Used to view security-related events and reports
`
$ tripwire –check `

--

`
$ top `
 -> a dynamic real-time monitoring tool that displays system summary info & a list of processes currently being managed by the kernel.
Displays processes sorted by CPU usage , you can switch the sorting to memory usage by pressing ‘Shift + M’.

--

`
$ vmstat `
Reports virtual memory statistics,  including memory usage, paging, and swapping. Displays a summary by default , you can specify an interval for continuous updates. Nr 1 indicates the interval in seconds for updates
`
$ vmstat 1 `

--

`$ vnstat `
Provides network traffic statistics over various time intervals ( hourly, daily, monthly). Can display network traffic for specific interfaces.

--

